define("jira/project/permissions/addpermissionmodel",["backbone","jquery","jira/project/permissions/grantcollection","wrm/context-path"],function(Backbone,$,GrantCollection,contextPath){return Backbone.Model.extend({defaults:{grantCollection:null,showMore:null,submitDisabled:null},url:function(){return this.addModelUrl},initialize:function(attributes){this.permissionSchemeId=attributes.permissionSchemeId;this.permissionKey=attributes.permissionKey;if(this.permissionKey){this.addModelUrl=contextPath()+"/rest/internal/2/managedpermissionscheme/"+this.permissionSchemeId+"/"+this.permissionKey}else{this.addModelUrl=contextPath()+"/rest/internal/2/managedpermissionscheme/securitytypes"}},toggleShowMore:function(){this.set("showMore",!this.get("showMore"))},parse:function(data){var newData=$.extend({},data);newData.grantCollection=new GrantCollection(data.primarySecurityType);newData.grantCollection.forEach(function(model){model.set("primary",true)});newData.grantCollection.add(data.secondarySecurityType);return newData}})});