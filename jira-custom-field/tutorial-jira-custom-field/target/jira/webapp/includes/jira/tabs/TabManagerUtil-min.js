define("jira/tabs/tab-manager/util",[],function(){var TabManagerUtil=function(initialUrl,tabParam,paramPairRegEx){this.initialUrl=initialUrl;this.paramPairRegEx=paramPairRegEx;this.tabParam=tabParam};TabManagerUtil.prototype.constructCompleteUrl=function(url){var replacement=this.getTabParamFromUrl(url);var completeUrl=this.initialUrl.replace(this.paramPairRegEx,replacement);completeUrl=completeUrl.replace("?&","?");completeUrl=completeUrl.replace(/[?&]$/,"");completeUrl=completeUrl.replace("&&","&");return completeUrl};TabManagerUtil.prototype.getTabParamFromUrl=function(url){var urlData=parseUri(url);if(urlData.queryKey[this.tabParam]){return encodeURIComponent(this.tabParam)+"="+urlData.queryKey[this.tabParam]}return""};TabManagerUtil.prototype.updateInitialUrl=function(url){var urlData=parseUri(url);if(!urlData.queryKey[this.tabParam]){return this.initialUrl}var newUrl=this.constructCompleteUrl(url);var newUrlData=parseUri(newUrl);var paramPair=this.tabParam+"="+urlData.queryKey[this.tabParam];if(!newUrlData.query){newUrl+="?"+paramPair}else{if(!newUrlData.queryKey[this.tabParam]){newUrl+="&"+paramPair}}this.initialUrl=newUrl;return this.initialUrl};TabManagerUtil.prototype.replaceHistoryItem=function(url){history.replaceState(null,"",url)};TabManagerUtil.prototype.saveHistoryItem=function(url){history.pushState(null,"",url)};return TabManagerUtil});